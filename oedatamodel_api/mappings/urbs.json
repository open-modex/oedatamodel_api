{
  "base_mapping": "regions",
  "mapping": {
    "commodity": "unique([scalars[*].input_energy_vector, scalars[*].output_energy_vector][])",
    "demand": "to_object(zip(map(&join('.', [@.region, @.input_energy_vector]), timeseries[?input_energy_vector==`electricity`]), timeseries[?input_energy_vector==`electricity`].series))",
    "process": "[map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']),map(&set(@, 'inv-cost', @.value), map(&set(@, 'Site', @.region),map(&set_combi(@, 'Process', @.technology, @.technology_type), scalars[?technology!=`transmission`&&technology!=`storage`&&parameter_name=='capital costs'])))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'fix-cost', @.value), map(&set(@, 'Site', @.region),map(&set_combi(@, 'Process', @.technology, @.technology_type), scalars[?technology!=`transmission`&&technology!=`storage`&&parameter_name=='fixed costs'])))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'var-cost', @.value), map(&set(@, 'Site', @.region),map(&set_combi(@, 'Process', @.technology, @.technology_type), scalars[?technology!=`transmission`&&technology!=`storage`&&parameter_name=='variable costs'])))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'depreciation', @.value), map(&set(@, 'Site', @.region),map(&set_combi(@, 'Process', @.technology, @.technology_type), scalars[?technology!=`transmission`&&technology!=`storage`&&parameter_name=='lifetime'])))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']),map(&set(@, 'inst-cap', @.value), map(&set(@, 'Site', @.region),map(&set_combi(@, 'Process', @.technology, @.technology_type), scalars[?technology!=`transmission`&&technology!=`storage`&&parameter_name=='installed capacity']))))][]",
    "process_commodity": "[map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'output_energy_vector', 'region', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'Ratio', @.value), map(&set(@, 'Commodity', @.input_energy_vector), map(&set_combi(@, 'Process', @.technology, @.technology_type), map(&set(@, 'Direction', 'In'), scalars[?technology!=`transmission`&&technology!=`storage`&&parameter_name=='input ratio']))))),map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'output_energy_vector', 'region', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'Ratio', @.value), map(&set(@, 'Commodity', @.output_energy_vector), map(&set_combi(@, 'Process', @.technology, @.technology_type), map(&set(@, 'Direction', 'Out'), scalars[?technology!=`transmission`&&technology!=`storage`&&parameter_name=='output ratio'])))))][]",
    "scenario": "scenario",
    "sites": "to_object(zip(['Site'],scalars[*].region[]))",
    "storage": "[map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']),map(&set(@, 'inv-cost', @.value), map(&set(@, 'Site', @.region),  map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Storage', @.technology_type), scalars[?technology==`storage`&&parameter_name=='capital costs']))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']),map(&set(@, 'fix-cost', @.value), map(&set(@, 'Site', @.region),  map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Storage', @.technology_type), scalars[?technology==`storage`&&parameter_name=='fixed costs']))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'var-cost', @.value), map(&set(@, 'Site', @.region),  map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Storage', @.technology_type), scalars[?technology==`storage`&&parameter_name=='variable costs']))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'depreciation', @.value), map(&set(@, 'Site', @.region), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Storage', @.technology_type), scalars[?technology==`storage`&&parameter_name=='lifetime']))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'inst-cap', @.value), map(&set(@, 'Site', @.region), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Storage', @.technology_type), scalars[?technology==`storage`&&parameter_name=='installed capacity']))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'eff-in', @.value), map(&set(@, 'Site', @.region), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Storage', @.technology_type), scalars[?technology==`storage`&&parameter_name=='input ratio']))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'eff-out', @.value), map(&set(@, 'Site', @.region), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Storage', @.technology_type), scalars[?technology==`storage`&&parameter_name=='output ratio'])))))][]",
    "supim": "to_object(zip(map(&join('.', [@.region, @.input_energy_vector]), timeseries[?input_energy_vector!=`electricity`]), timeseries[?input_energy_vector!=`electricity`].series))",
    "timeseries": "to_object(zip(map(&join('.', [@.region, @.parameter_name]), timeseries), timeseries[].series))",
    "transmission": "[map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'inv-cost', @.value), map(&set(@, 'Site In', @.region[0]),  map(&set(@, 'Site Out', @.region[1]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='capital costs'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']),map(&set(@, 'fix-cost', @.value), map(&set(@, 'Site In', @.region[0]),  map(&set(@, 'Site Out', @.region[1]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='fixed costs'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'var-cost', @.value), map(&set(@, 'Site In', @.region[0]),  map(&set(@, 'Site Out', @.region[1]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='variable costs'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'depreciation', @.value), map(&set(@, 'Site In', @.region[0]), map(&set(@, 'Site Out', @.region[1]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='lifetime'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'inst-cap', @.value), map(&set(@, 'Site In', @.region[0]), map(&set(@, 'Site Out', @.region[1]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='installed capacity'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'eff', @.value), map(&set(@, 'Site In', @.region[0]), map(&set(@, 'Site Out', @.region[1]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='output ratio'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'inv-cost', @.value), map(&set(@, 'Site In', @.region[1]),  map(&set(@, 'Site Out', @.region[0]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='capital costs'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'fix-cost', @.value), map(&set(@, 'Site In', @.region[1]),  map(&set(@, 'Site Out', @.region[0]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='fixed costs'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'var-cost', @.value), map(&set(@, 'Site In', @.region[1]),  map(&set(@, 'Site Out', @.region[0]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='variable costs'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'depreciation', @.value), map(&set(@, 'Site In', @.region[1]), map(&set(@, 'Site Out', @.region[0]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='lifetime'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'inst-cap', @.value), map(&set(@, 'Site In', @.region[1]), map(&set(@, 'Site Out', @.region[0]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='installed capacity'])))))), map(&exclude(@, ['technology','technology_type','id', 'scenario_id', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value']), map(&set(@, 'eff', @.value), map(&set(@, 'Site In', @.region[1]), map(&set(@, 'Site Out', @.region[0]), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Transmission', @.technology_type), scalars_tra[?technology==`transmission`&&parameter_name=='output ratio']))))))][]"
  }
}
