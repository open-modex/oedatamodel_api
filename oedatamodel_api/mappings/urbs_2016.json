{
  "base_mapping": "urbs_grouped_2",
  "mapping": {
    "scenario": "scenario",
    "process_commodity": "unique([map(&exclude(@, ['technology','emission limit','natural domestic limit','WACC', 'distance','emission factor','technology_type', 'year', 'variable costs', 'fixed costs', 'capital costs', 'lifetime', 'input ratio', 'output ratio', 'installed capacity', 'input_energy_vector', 'output_energy_vector', 'region', 'unit', 'fuel costs', 'emission costs','expansion limit']), map(&set(@, 'ratio-min', @.\"input ratio min\"), map(&set(@, 'ratio', @.\"input ratio\",), map(&set(@, 'Direction', 'In'), map(&set(@, 'Commodity', @.input_energy_vector), map(&set_combi(@, 'Process', @.technology, @.technology_type), scalars[?technology!=`transmission`&&technology!=`storage`&&year==`2016`])))))),map(&exclude(@, ['technology','WACC', 'emission limit','natural domestic limit','distance','technology_type', 'emission factor','year', 'variable costs', 'fixed costs', 'capital costs', 'lifetime', 'input ratio', 'output ratio', 'installed capacity', 'input_energy_vector', 'output_energy_vector', 'region', 'unit', 'fuel costs', 'emission costs','expansion limit']), map(&set(@, 'ratio-min', @.\"output ratio min\"), map(&set(@, 'ratio', @.\"output ratio\"),map(&set(@, 'Direction', 'Out'),  map(&set(@, 'Commodity', @.output_energy_vector), map(&set_combi(@, 'Process', @.technology, @.technology_type), scalars[?technology!=`transmission`&&technology!=`storage`&&year==`2016`])))))),map(&exclude(@, ['technology','WACC', 'emission limit','natural domestic limit','technology_type', 'distance','emission factor','year', 'variable costs', 'fixed costs', 'capital costs', 'lifetime', 'input ratio', 'output ratio', 'installed capacity', 'input_energy_vector', 'output_energy_vector', 'region', 'unit', 'fuel costs', 'emission costs','expansion limit']), map(&set(@, 'ratio-min', @.\"output ratio min\"), map(&set(@, 'ratio', @.\"emission factor\"),map(&set(@, 'Direction', 'Out'),  map(&set(@, 'Commodity', 'CO2'), map(&set_combi(@, 'Process', @.technology, @.technology_type), scalars[?technology!=`transmission`&&technology!=`storage`&&year==`2016`]))))))][])",
    "process": "map(&exclude(@, ['technology','natural domestic limit','emission limit','distance','WACC', 'emission factor','technology_type','id', 'scenario_id', 'variable costs', 'lifetime', 'input ratio', 'output ratio',  'fixed costs',  'capital costs',  'installed capacity', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value', 'year', 'fuel costs', 'emission costs', 'expansion limit']),   map(&set(@, 'area-per-cap', @.\"area_usage\"),   map(&set(@, 'depreciation', @.lifetime) ,  map(&set(@, 'wacc', `0.07`), map(&set(@, 'var-cost', @.\"variable costs\"),map(&set(@, 'fix-cost', @.\"fixed costs\"), map(&set(@, 'inv-cost', @.\"capital costs\"), map(&set(@, 'min-fraction', @.\"minimum partload\"), map(&set(@, 'max-grad', @.\"maximum ramping\"), map(&set(@, 'cap-up', @.\"expansion limit\"), map(&set(@, 'cap-lo', @.\"minimum capacity\"), map(&set(@, 'inst-cap', @.\"installed capacity\"), map(&set_combi(@, 'Process', @.technology, @.technology_type),map(&set(@, 'Site', @.region),  scalars[?technology!=`transmission`&&technology!=`storage`&&year==`2016`]))))))))))))))[]",
    "storage": "map(&exclude(@, ['technology','emission limit','natural domestic limit','WACC', 'distance','emission factor','technology_type','id', 'scenario_id', 'variable costs', 'lifetime', 'input ratio', 'output ratio',  'fixed costs',  'capital costs',  'installed capacity', 'input_energy_vector', 'region','output_energy_vector', 'unit', 'type', 'method', 'tags', 'source', 'comment', 'parameter_name', 'value', 'year', 'fuel costs', 'emission costs','expansion limit']),  map(&set(@, 'ep-ratio', @.\"energy to power ratio\"),  map(&set(@, 'discharge', @.discharge), map(&set(@, 'init', @.initial),   map(&set(@, 'depreciation', @.lifetime), map(&set(@, 'wacc',  `0.07`) ,   map(&set(@, 'var-cost-c', @.\"variable costs\"),map(&set(@, 'var-cost-p', @.\"variable costs power\"), map(&set(@, 'fix-cost-c', @.\"fixed costs\"), map(&set(@, 'fix-cost-p', @.\"fixed costs power\"), map(&set(@, 'inv-cost-c', @.\"capital costs\"),map(&set(@, 'inv-cost-p', @.\"capital costs power\"), map(&set(@, 'eff-out', @.\"output ratio\"), map(&set(@, 'eff-in', @.\"input ratio\"), map(&set(@, 'cap-up-p', @.\"maximum power capacity\"),map(&set(@, 'cap-lo-p', @.\"minimum power capacity\"), map(&set(@, 'inst-cap-p', @.\"installed power capacity\"),map(&set(@, 'cap-up-c', @.\"maximum capacity\"),map(&set(@, 'cap-lo-c', @.\"minimum capacity\"),map(&set(@, 'inst-cap-c', @.\"installed capacity\"),map(&set(@, 'Commodity', @.input_energy_vector), map(&set(@, 'Storage', @.technology_type), map(&set(@, 'Site', @.region),  scalars[?technology==`storage`&&year==`2016`])))))))))))))))))))))))[]",
    "transmission": "[map(&exclude(@, ['unit','natural domestic limit','emission limit','WACC', 'distance','emission factor','year','region','input_energy_vector','output_energy_vector','technology','technology_type','id', 'scenario_id', 'variable costs', 'lifetime', 'input ratio', 'output ratio',  'fixed costs',  'capital costs',  'installed capacity', 'input_energy', 'fuel costs', 'emission costs','expansion limit']),  map(&set(@, 'base_voltage', @.base_voltage), map(&set(@, 'difflimit', @.difflimit),map(&set(@, 'reactance', @.reactance),   map(&set(@, 'depreciation', @.lifetime), map(&set(@, 'wacc',  `0.07`) ,map(&set(@, 'cap-up', @.\"maximum capacity\"),map(&set(@, 'cap-lo', @.\"minimum capacity\"), map(&set(@, 'inst-cap', @.\"installed capacity\"),  map(&set(@, 'var-cost', scalars_tra_general[0].\"variable costs\"), map(&set(@, 'fix-cost', scalars_tra_general[0].\"fixed costs\"), map(&set(@, 'inv-cost', scalars_tra_general[0].\"capital costs\"), map(&set(@, 'eff', scalars_tra_general[0].\"output ratio\"),map(&set(@, 'Commodity', @.input_energy_vector), map(&set(@, 'Transmission', @.technology_type), map(&set(@, 'Site Out', @.region[1]), map(&set(@, 'Site In', @.region[0]),  scalars_tra[?technology==`transmission`&&year==`2016`])))))))))))))))))[],map(&exclude(@, ['unit','emission limit','WACC', 'natural domestic limit','emission factor','distance','year','region','input_energy_vector','output_energy_vector','technology','technology_type','id', 'scenario_id', 'variable costs', 'lifetime', 'input ratio', 'output ratio',  'fixed costs',  'capital costs',  'installed capacity', 'input_energy','expansion limit']),  map(&set(@, 'base_voltage', @.base_voltage), map(&set(@, 'difflimit', @.difflimit),map(&set(@, 'reactance', @.reactance),   map(&set(@, 'depreciation', @.lifetime), map(&set(@, 'wacc',  `0.07`) ,map(&set(@, 'cap-up', @.\"maximum capacity\"),map(&set(@, 'cap-lo', @.\"minimum capacity\"), map(&set(@, 'inst-cap', @.\"installed capacity\"),  map(&set(@, 'var-cost', scalars_tra_general[0].\"variable costs\"), map(&set(@, 'fix-cost', scalars_tra_general[0].\"fixed costs\"), map(&set(@, 'inv-cost', scalars_tra_general[0].\"capital costs\"), map(&set(@, 'eff', scalars_tra_general[0].\"output ratio\"),map(&set(@, 'Commodity', @.input_energy_vector), map(&set(@, 'Transmission', @.technology_type), map(&set(@, 'Site Out', @.region[0]), map(&set(@, 'Site In', @.region[1]),  scalars_tra[?technology==`transmission`&&year==`2016`])))))))))))))))))[]][]",
    "sites":     "map(&set(@, 'area', @.area), map(&to_object([@]), zip(repeat('Site', length(unique(scalars[*].region[]))), unique(scalars[*].region[]))))",
    "scalars_tra_general": "scalars_tra_general",
    "demand_new": "to_object(zip(keys(timeindex), map(&unpack_dict_series(set(@[0], 'timeindex', @[1][1])), zip(demandseries, items(timeindex)))))",
    "cf_new": "to_object(zip(keys(timeindex), map(&unpack_dict_series(set(@[0], 'timeindex', @[1][1])), zip(cfseries, items(timeindex)))))",
    "scalars_tra": "scalars_tra",
    "commodity": "unique(map(&set(@, 'max', @.\"natural domestic limit\"), map(&set(@, 'maxperhour', @.maxperhour), [map(&exclude(@, ['unit','emission limit','WACC', 'emission factor','distance','year','region','input_energy_vector','output_energy_vector','technology','technology_type','id', 'scenario_id', 'variable costs', 'lifetime', 'input ratio', 'output ratio',  'fixed costs',  'capital costs',  'installed capacity', 'input_energy', 'fuel costs', 'emission costs','expansion limit']), map(&set(@, 'price', @.\"fuel costs\"), map(&set(@, 'Commodity', @.input_energy_vector), map(&set(@, 'Site', @.region), scalars)))), map(&exclude(@, ['unit','emission limit','WACC', 'distance','emission factor','year','region','input_energy_vector','output_energy_vector','technology','technology_type','id', 'scenario_id', 'variable costs', 'lifetime', 'input ratio', 'output ratio',  'fixed costs',  'capital costs',  'installed capacity', 'input_energy', 'fuel costs', 'emission costs','expansion limit']), map(&set(@, 'price', @.\"emission costs\"), map(&set(@, 'Commodity', @.output_energy_vector), map(&set(@, 'Site', @.region), scalars[?year==`2016`]))))][])))"
  }
}
